<!DOCTYPE html>
<html>
<head><!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5DHSN7G1JT"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-5DHSN7G1JT');
    </script>
    
    <title>Stock Recommendations</title>
     <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <style>


h1, h2, h3 {
    text-align: center;
}

.stock-screener {
    margin: 20px;
    padding: 20px;
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.indicator {
    margin-bottom: 20px;
}

.indicator h3 {
    background-color: #333;
    color: #fff;
    padding: 10px;
    border-radius: 5px;
}

.indicator ul {
    list-style-type: none;
    padding: 0;
}

.indicator li {
    margin-bottom: 10px;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    table-layout: fixed;
}

th, td {
    padding: 8px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

th {
    background-color: #333;
    color: #fff;
    cursor: pointer;
}

tr:nth-child(even) {
    background-color: #f2f2f2;
}

tr:hover {
    background-color: #e6e6e6;
}
table a{
    color:#333;
}

/* Styles for smaller screens */
@media (max-width: 768px) {
  .table-responsive {
    overflow-x: auto;
  }

  #stockTable {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
  }

  #stockTable th,
  #stockTable td {
    white-space: nowrap;
  }
}

    </style>

</head>
<body>
  
    
    <header>
        <nav>
            <a href="{{ url_for('index') }}" class="logo">InvestorEdge</a>
            <ul>
                <li><a href="{{ url_for('portfolio') }}">Portfolio</a></li>
                <li><a href="{{ url_for('compound_interest') }}">CI Calculator</a></li>
                <li><a href="{{ url_for('screener') }}">Stock Screener</a></li>
            
                <li> <a href="{{ url_for('visualization') }}">Visualization</a></li>
                <li> <a href="{{ url_for('blog') }}">Blog</a></li>
                <li>    <a href="{{ url_for('logout') }}"> {{ user }} Logout</a></li>
    
            </ul>
        </nav>
    </header>
    <h1>Smart Stock Screening for Nifty 200</h1>
    <p>Empower your investment decisions with our advanced stock screening tool. Updated every 5 hours, our platform provides real-time insights into Nifty 200 stocks and beyond. Leverage cutting-edge data to refine your strategy and stay ahead in the dynamic world of investing.</p>
           <!-- New search bar -->
       <div class="search-container">
        <form action="{{ url_for('screener') }}" method="get">
            <input type="text" list="companies" name="search" placeholder="Search for a company...">
            <datalist id="companies">
                {% for company in companies %}
                <option value="{{ company }}">
                {% endfor %}
            </datalist>
            <button type="submit">Search</button>
        </form>
    </div>
    <div class="stock-screener">
        <h2>Technical Indicator Guidelines</h2>
        
        <div class="indicator">
            <h3>Relative Strength Index (RSI)</h3>
            <p>It's like a speedometer for stock price momentum.</p>
            <ul>
                <li>30-70: Normal range</li>
                <li>Above 70: Stock might be moving up too fast</li>
                <li>Below 30: Stock might be falling too quickly</li>
                <li>Around 50: Neutral, no strong movement</li>
            </ul>
        </div>
        
        <div class="indicator">
            <h3>Moving Average Convergence Divergence (MACD)</h3>
            <p>It's like a compass showing which direction the stock is moving.</p>
            <ul>
                <li>Positive values: Stock is likely going up</li>
                <li>Negative values: Stock is likely going down</li>
                <li>Rising values: Momentum is increasing</li>
            </ul>
        </div>
        
        <div class="indicator">
            <h3>Average Directional Index (ADX)</h3>
            <p>It's like a strength meter for stock trends.</p>
            <ul>
                <li>Above 25: There's a strong trend (either up or down)</li>
                <li>Rising values: The trend is getting stronger</li>
            </ul>
        </div>
        
        <div class="indicator">
            <h3>Average True Range (ATR)</h3>
            <p>It's like a ruler measuring how much a stock's price moves.</p>
            <ul>
                <li>Higher values: The stock price is moving a lot</li>
                <li>Lower values: The stock price is more stable</li>
            </ul>
        </div>
        
        <div class="indicator">
            <h3>Exponential Moving Average (EMA) 200</h3>
            <p>It's like a long-term trend line for the stock.</p>
            <ul>
                <li>Price above EMA 200: The stock is generally going up</li>
                <li>Rising EMA 200: The overall trend is positive</li>
            </ul>
        </div>
    </div>



    <table id="stockTable">
        {{ table|safe }}
    </table>

    <script>



        document.addEventListener('DOMContentLoaded', function() {
            const table = document.getElementById('stockTable');
            const headers = table.querySelectorAll('th');

            headers.forEach(header => {
                header.addEventListener('click', () => {
                    const column = header.cellIndex;
                    const rows = Array.from(table.querySelectorAll('tr')).slice(1); // Exclude header row
                    
                    rows.sort((a, b) => {
                        const aValue = a.cells[column].textContent.trim();
                        const bValue = b.cells[column].textContent.trim();
                        
                        // Ensure numeric values are compared correctly
                        const aNum = parseFloat(aValue.replace(/,/g, ''));
                        const bNum = parseFloat(bValue.replace(/,/g, ''));

                        if (!isNaN(aNum) && !isNaN(bNum)) {
                            return aNum - bNum;
                        } else {
                            return aValue.localeCompare(bValue);
                        }
                    });

                    // Toggle sort direction
                    if (header.classList.contains('asc')) {
                        rows.reverse();
                        header.classList.remove('asc');
                        header.classList.add('desc');
                    } else {
                        header.classList.remove('desc');
                        header.classList.add('asc');
                    }

                    // Remove sort classes from other headers
                    headers.forEach(h => {
                        if (h !== header) {
                            h.classList.remove('asc', 'desc');
                        }
                    });

                    // Reorder table rows
                    rows.forEach(row => table.appendChild(row));
                });
            });
        });

        let sortDirection = 1;

        function sortTable(columnIndex) {
            const table = document.querySelector('.sortable-table');
            const rows = Array.from(table.rows).slice(1); // Skip the header row

            rows.sort((a, b) => {
                const aValue = a.cells[columnIndex].innerText.toLowerCase();
                const bValue = b.cells[columnIndex].innerText.toLowerCase();

                if (!isNaN(parseFloat(aValue)) && !isNaN(parseFloat(bValue))) {
                    return (parseFloat(aValue) - parseFloat(bValue)) * sortDirection;
                } else {
                    return aValue.localeCompare(bValue) * sortDirection;
                }
            });

            sortDirection = -sortDirection; // Change the sort direction

            const tableBody = table.tBodies[0];
            tableBody.innerHTML = "";
            rows.forEach(row => tableBody.appendChild(row));
        }

        const tableHeaders = document.querySelectorAll('.sortable-table th');
        tableHeaders.forEach((header, index) => {
            header.addEventListener('click', () => sortTable(index));
        });
    </script>
</body>
</html>
